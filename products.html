<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEERA/-Products</title>
    <link rel="stylesheet" href="style/pro.css">
</head>
<body>
    <div id="cont"></div>

    <div id="navbar">
        <div class="nav">
            <div>
                <input type="search" placeholder="Search MEERA" id="search">
            </div>
            <div>
                <a href="dashBoard.html"><img src="meera/meera.jpg" alt="logo of MEERA" id="logo"></a>
            </div>
            <div>
               <div>
                <a href="" target="_blank">
                    <img src="https://img.icons8.com/ios-glyphs/2x/hearts.png" alt="Wishlist">
                </a>
               </div>
               <div>
                <a href="cart.html">
                    <img src="https://img.icons8.com/ios/2x/shopping-cart.png" alt="Cart">
                </a>
               </div>
               <div>
                <a href="login.html">
                    <img src="https://img.icons8.com/cotton/2x/gender-neutral-user--v3.png" alt="login">
                </a>
               </div>
            </div>
        </div>
    </div>
    <!-- top -->
    <div id="seven">
        <h3>SALE</h3>
        <h3>MAKEUP</h3>
        <h3>SKINCARE</h3>
        <h3>FRAGRANCE</h3>
        <h3>HAIRCARE</h3>
        <h3>TOOLS & BRUSHES</h3>
        <h3>BRANDS</h3>
    </div>


    <select onchange="filterdata()" id="filter">
        <option value="">Category</option>
        <option value="Perfume">Perfume</option>
        <option value="Blender">Blender</option>
        <option value="Foundation">Foundation</option>
        <option value="Cream">Cream</option>
        <option value="Lipstick">Lipstick</option>
        <option value="Mascara">Mascara</option>
        <option value="Powder">Powder</option>
        <option value="Eyeshadow">Eyeshadow</option>
        <option value="Concelar">Concelar</option>
        <option value="Nails">Nails</option>
      </select>

      
      <select onchange="handdleSort()" id="sort">
        <option value="">Sort by Price</option>
          <option value="HTL">HTL</option>
          <option value="LTH">LTH</option>
      </select>
      

 
    <div id="pro"></div>
    
</body>
</html>
<script>

let arr=[];
    let url="https://636d371191576e19e3231cf4.mockapi.io/products"
    async function getdata(){
      try{
        let res= await fetch(url)
      let out = await res.json();
      arr=[...out]
      console.log(arr)
      displaycard(arr)
      }catch(err){
        alert(err);
      }
    }

    getdata();

    

    function displaycard(arr){
      let carts= JSON.parse(localStorage.getItem("cart"))||[]
      document.querySelector("#pro").innerHTML="";

      arr?.forEach(function(el){
        let div= document.createElement("div")
        div.style.backgroundColor="pink"
        div.style.color="white"

        let image = document.createElement("img")
        image.setAttribute("src", el.avatar)
        image.style.width= "75%"

        let name = document.createElement("h2")
        name.innerText= el.ttle

        let price = document.createElement("h3")
        price.innerText= el.price

        let deet= document.createElement("p")
        deet.innerText= el.description

        let cat = document.createElement("p")
        cat.innerText = el.category

        let btn= document.createElement("button")
        btn.innerText= "Add to Cart"
        btn.style.backgroundColor="lightblue"
        btn.style.color="white"
        btn.style.border="0px"
        btn.style.margin= "3px"
        btn.style.height="30px"
        btn.style.boxShadow="rgba(0, 0, 0, 0.15) 1.95px 1.95px 2.6px;"

        btn.addEventListener("click", function(){
          carts.push(el)
          localStorage.setItem("cart", JSON.stringify(carts))
          alert("Product Added To Cart")
          
        })

        div.append(image,name,price,deet,cat,btn)

        document.querySelector("#pro").append(div)

      })
    }

    function filterdata(){
    let v= document.querySelector("#filter").value
    let fd= arr.filter(function(el){
      return el.category== v
    })
    console.log(fd)
    displaycard(fd)
   }

   function handdleSort(){
    let selected=document.querySelector("#sort").value
    if(selected=="HTL"){
        arr.sort((a,b)=>b.price-a.price)
    }if(selected=="LTH"){
        arr.sort((a,b)=>a.price-b.price)
    }

    displaycard(arr);
}

</script>